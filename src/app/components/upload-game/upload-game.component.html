<div class="max-w-2xl mx-auto py-8">
  <div class="flex items-center justify-between mb-8">
    <button (click)="goBack()" class="btn-secondary">
      <i class="fas fa-arrow-left mr-2"></i>
      Back
    </button>
    <h2 class="text-2xl font-bold text-gray-100">Upload New Game</h2>
  </div>

  <form [formGroup]="uploadForm" (ngSubmit)="onSubmit()" class="space-y-6">
    <!-- Game Title -->
    <div class="form-group">
      <label for="title" class="form-label">Game Title</label>
      <input
        type="text"
        id="title"
        formControlName="title"
        class="input-primary"
        [class.border-red-500]="uploadForm.get('title')?.invalid && uploadForm.get('title')?.touched"
        placeholder="Enter game title"
      >
      <span class="form-error" *ngIf="getControlError('title')">
        {{ getControlError('title') }}
      </span>
    </div>

    <!-- Description -->
    <div class="form-group">
      <label for="description" class="form-label">Description</label>
      <textarea
        id="description"
        formControlName="description"
        rows="4"
        class="input-primary resize-none"
        [class.border-red-500]="uploadForm.get('description')?.invalid && uploadForm.get('description')?.touched"
        placeholder="Enter game description"
      ></textarea>
      <span class="form-error" *ngIf="getControlError('description')">
        {{ getControlError('description') }}
      </span>
    </div>

    <!-- Console Selection -->
    <div class="form-group">
      <label for="consoleId" class="form-label">Console</label>
      <select
        id="consoleId"
        formControlName="consoleId"
        class="input-primary"
        [class.border-red-500]="uploadForm.get('consoleId')?.invalid && uploadForm.get('consoleId')?.touched"
      >
        <option value="">Select a console</option>
        <option *ngFor="let console of consoles" [value]="console.id">
          {{ console.name }}
        </option>
      </select>
      <span class="form-error" *ngIf="getControlError('consoleId')">
        {{ getControlError('consoleId') }}
      </span>
    </div>

    <!-- Release Year -->
    <div class="form-group">
      <label for="releaseYear" class="form-label">Release Year</label>
      <input
        type="number"
        id="releaseYear"
        formControlName="releaseYear"
        class="input-primary"
        [class.border-red-500]="uploadForm.get('releaseYear')?.invalid && uploadForm.get('releaseYear')?.touched"
        placeholder="Enter release year"
      >
      <span class="form-error" *ngIf="getControlError('releaseYear')">
        {{ getControlError('releaseYear') }}
      </span>
    </div>

    <!-- Genre -->
    <div class="form-group">
      <label for="genre" class="form-label">Genre</label>
      <input
        type="text"
        id="genre"
        formControlName="genre"
        class="input-primary"
        [class.border-red-500]="uploadForm.get('genre')?.invalid && uploadForm.get('genre')?.touched"
        placeholder="Enter game genre"
      >
      <span class="form-error" *ngIf="getControlError('genre')">
        {{ getControlError('genre') }}
      </span>
    </div>

    <!-- Publisher -->
    <div class="form-group">
      <label for="publisher" class="form-label">Publisher</label>
      <input
        type="text"
        id="publisher"
        formControlName="publisher"
        class="input-primary"
        [class.border-red-500]="uploadForm.get('publisher')?.invalid && uploadForm.get('publisher')?.touched"
        placeholder="Enter publisher name"
      >
      <span class="form-error" *ngIf="getControlError('publisher')">
        {{ getControlError('publisher') }}
      </span>
    </div>

    <!-- Game Image Upload -->
    <div class="form-group">
      <label for="image" class="form-label">Game Image</label>
      <input
        type="file"
        id="image"
        (change)="onFileSelected($event)"
        accept="image/*"
        class="hidden"
        #fileInput
      >
      <div class="flex items-center space-x-4">
        <button
          type="button"
          (click)="fileInput.click()"
          class="btn-secondary"
        >
          <i class="fas fa-upload mr-2"></i>
          Choose Image
        </button>
        <span class="text-gray-400" *ngIf="selectedFile">
          {{ selectedFile.name }}
        </span>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="flex justify-end">
      <button
        type="submit"
        class="btn-primary"
        [disabled]="uploadForm.invalid || isLoading"
      >
        <i class="fas" [class.fa-spinner]="isLoading" [class.fa-spin]="isLoading" [class.fa-save]="!isLoading"></i>
        <span>{{ isLoading ? 'Uploading...' : 'Upload Game' }}</span>
      </button>
    </div>
  </form>
</div>
